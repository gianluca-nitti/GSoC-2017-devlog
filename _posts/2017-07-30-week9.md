---
date: 2017-07-30
category: week9
---

#### Completed login via identity storage service and prepared the "module installation" feature
As you can see from the title, the two topics covered in this blog update are quite different and probably two separate posts would have been better, however I didn't found the time to write one in the middle of the week - I preferred focusing on making progress in the project - so I'll summarize everything here.\\
\\
At the end of last week, I said I was working on allowing the user to login to the web/mobile client through the identity storage service; this feature is now completed. There is still a little logistic problem - GitHub pages, where the web client is deployed ([link](https://gianluca-nitti.github.io/FacadeServer-frontend/)), serves the files over HTTPS, but I haven't set up an SSL certificate for the [identity storage service](http://165.227.140.7/) instance running on my server. Browsers by default don't allow a page loaded over HTTPS to make plain HTTP requests to another server, so this feature does not work with the actual combination of deployed instances (you will see a "mixed content" error in the browser console if you try); it happily works if you set up the client locally as described in it's [readme](https://github.com/gianluca-nitti/facadeserver-frontend#how-to-build), and this doesn't affect the Android application. MovingBlocks admins offered to host an instance of the identity storage on their servers, so maybe we could setup the certificate there, or alternatively for now just serve the client in plain HTTP.\\
A small side note about the client: the ReactXP (the library powering it) developers kindly fixed all the [issues](https://github.com/microsoft/reactxp/issues?q=is%3Aissue+author%3Agianluca-nitti){:.gh-issue} I reported, so the user experience is more stable now (modal dialogs now work on Android too, and the visual style is consistent between the browser and the mobile version).\\
\\
In the second part of the week, I worked on providing a way to allow server administrators to install modules from the web interface (at the moment, you can only create new games with modules whose jars are already present in the server installation), like it can be done in the game client from the "Select Modules" screen. In the current official version of Terasology, the code which handles download - and dependency resolution - of new modules is tightly coupled with it's UI (the SelectModulesScreen class), so it took some days to refactor this part of the engine to separate the logic from the UI and making it accessible to external code (in FacadeServer). I opened a [pull request](https://github.com/MovingBlocks/Terasology/pull/3028){:.gh-pr} in the engine repository with the changed code; with the engine patched in this way, it's possible to access a *ModuleInstallManager* class, which provides method for pre-installation (dependency resolution) and installation of new modules, from the ModuleManager class which is registered in the root engine context during initialization. At the moment I'm working in the FacadeServer repository to bridge the HTTP/WebSocket server with the *ModuleInstallManager* to achieve the feature described above.
